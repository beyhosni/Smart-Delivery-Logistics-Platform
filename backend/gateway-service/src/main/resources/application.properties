# Server Configuration
server.port=8080

# Application Configuration
spring.application.name=gateway-service

# Gateway Routes
spring.cloud.gateway.routes[0].id=delivery-service
spring.cloud.gateway.routes[0].uri=http://delivery-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/deliveries/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[1].id=dispatcher-service
spring.cloud.gateway.routes[1].uri=http://dispatcher-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/dispatchers/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[2].id=tracking-service
spring.cloud.gateway.routes[2].uri=http://tracking-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/tracking/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[3].id=notification-service
spring.cloud.gateway.routes[3].uri=http://notification-service:8084
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/notifications/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[4].id=route-optimizer-service
spring.cloud.gateway.routes[4].uri=http://route-optimizer-service:8085
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/routes/**
spring.cloud.gateway.routes[4].filters[0]=StripPrefix=2

# Circuit Breaker Configuration
spring.cloud.gateway.routes[0].filters[1].name=CircuitBreaker
spring.cloud.gateway.routes[0].filters[1].args[name]=deliveryServiceCircuitBreaker
spring.cloud.gateway.routes[0].filters[1].args[fallbackUri]=forward:/fallback/delivery-service

spring.cloud.gateway.routes[1].filters[1].name=CircuitBreaker
spring.cloud.gateway.routes[1].filters[1].args[name]=dispatcherServiceCircuitBreaker
spring.cloud.gateway.routes[1].filters[1].args[fallbackUri]=forward:/fallback/dispatcher-service

spring.cloud.gateway.routes[2].filters[1].name=CircuitBreaker
spring.cloud.gateway.routes[2].filters[1].args[name]=trackingServiceCircuitBreaker
spring.cloud.gateway.routes[2].filters[1].args[fallbackUri]=forward:/fallback/tracking-service

spring.cloud.gateway.routes[3].filters[1].name=CircuitBreaker
spring.cloud.gateway.routes[3].filters[1].args[name]=notificationServiceCircuitBreaker
spring.cloud.gateway.routes[3].filters[1].args[fallbackUri]=forward:/fallback/notification-service

spring.cloud.gateway.routes[4].filters[1].name=CircuitBreaker
spring.cloud.gateway.routes[4].filters[1].args[name]=routeOptimizerServiceCircuitBreaker
spring.cloud.gateway.routes[4].filters[1].args[fallbackUri]=forward:/fallback/route-optimizer-service

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations[/**].allowCredentials=true

# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.gateway.enabled=true

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG
